services:
  claude-bot:
    build:
      context: .
    container_name: claude-bot
    environment:
      - PROJECTS_DIR=/home/codespace/claudebot/ws # Directory where your projects are stored inside the container
      - ALLOWED_USER_IDS=[xxx] # Replace with your Telegram user ID(s)
      - TELEGRAM_BOT_TOKEN=xxx # Your Telegram bot token
      - CLAUDE_CODE_OAUTH_TOKEN=xxx # Your Claude Code OAuth token
      - GIT_SSH_COMMAND=ssh -i /home/codespace/.ssh/git # Use the mounted SSH key for git operations
      - GIT_AUTHOR_NAME=claudebot
      - GIT_AUTHOR_EMAIL=xxx
      - GIT_COMMITTER_NAME=claudebot
      - GIT_COMMITTER_EMAIL=xxx
      - MISTRAL_API_KEY=xxx # Your Mistral API key for transcription
      - TRANSCRIPTION_LANGUAGE=en
    volumes:
      - /your/local/projects:/home/codespace/claudebot/ws # Mount your local projects directory
      - /your/local/gitssh:/home/codespace/.ssh:ro # Mount your git SSH keys for git access
      - /your/local/claude:/home/codespace/.claude # Mount your Claude configuration directory for session persistence
      - /your/local/jobs.sqlite:/home/codespace/claudebot/jobs.sqlite # Mount a local file for scheduled job persistence
    restart: always